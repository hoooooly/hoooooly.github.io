<!DOCTYPE html>
<html lang="Zh">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/logo.webp">
  <title>Selenium的基本使用 | Holy的个人站点</title>
  <meta name="author" content="Holy Chan" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="selenium" />
  
  <meta name="description" content="在很多情况下，Ajax请求的接口通常会包含加密的参数，如token、sign等，如：https:&#x2F;&#x2F;dynamic2.scrape.cuiqingcai.com&#x2F;，它的Ajax接口是包含一个token参数的，如图所示。  由于接口的请求加上了token参数，如果不深入分析并找到token的构造逻辑，是难以直接模拟这些Ajax请求的。 Selenium是一个自动化测试工具，利用它可以驱动浏览器执行特">
<meta property="og:type" content="article">
<meta property="og:title" content="Selenium的基本使用">
<meta property="og:url" content="http://example.com/2021/05/25/Selenium%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="Holy的个人站点">
<meta property="og:description" content="在很多情况下，Ajax请求的接口通常会包含加密的参数，如token、sign等，如：https:&#x2F;&#x2F;dynamic2.scrape.cuiqingcai.com&#x2F;，它的Ajax接口是包含一个token参数的，如图所示。  由于接口的请求加上了token参数，如果不深入分析并找到token的构造逻辑，是难以直接模拟这些Ajax请求的。 Selenium是一个自动化测试工具，利用它可以驱动浏览器执行特">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/images/logo.webp">
<meta property="article:published_time" content="2021-05-25T13:15:51.000Z">
<meta property="article:modified_time" content="2021-05-29T07:08:40.000Z">
<meta property="article:author" content="Holy Chan">
<meta property="article:tag" content="selenium">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/logo.webp">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" type="text/css" media="all">
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/qrcode_js@1.0.0/qrcode.min.js"></script>
  
<meta name="generator" content="Hexo 5.4.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>归档</a></li>
                                    
                                
                                    
                                        <li><a href="/about/"><i class="fa fa-paw"></i>关于我</a></li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-link"></i>链接</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="http://holychan.ltd:8000">个人网盘</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">Holy的个人站点</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>Holy的个人站点</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        <section class="col-md-8">
    <article>
        <div class="kratos-hentry kratos-post-inner clearfix">
            <header class="kratos-entry-header">
                
                    <h1 class="kratos-entry-title text-center">Selenium的基本使用</h1>
                
                
                <ul class="kratos-post-meta text-center">
                    <li><i class="fa fa-calendar"></i> 2021-05-25</li>
                    <li><i class="fa fa-user"></i> 作者 Holy Chan</li>
                    <li>
                        <i class="fa fa-edit"></i> 
                        
                        
                            ~15.79K
                        
                        字
                    </li>
                    
                </ul>
            </header>
            <div class="kratos-post-content">
                <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                    本文最后编辑于 <time datetime="1622272120000"></time> 前，其中的内容可能需要更新。
                </div>
                
                    <div class="kratos-post-inner-toc">
                        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.</span> <span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Selenium%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">Selenium安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chrome-driver%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.</span> <span class="toc-text">chrome driver安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.</span> <span class="toc-text">声明浏览器对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.</span> <span class="toc-text">访问页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E8%8A%82%E7%82%B9"><span class="toc-number">5.</span> <span class="toc-text">查找节点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.</span> <span class="toc-text">单个节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="toc-number">5.2.</span> <span class="toc-text">多个节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E4%BA%A4%E4%BA%92"><span class="toc-number">5.3.</span> <span class="toc-text">节点交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E4%BD%9C%E9%93%BE"><span class="toc-number">5.4.</span> <span class="toc-text">动作链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%89%A7JavaScript"><span class="toc-number">5.5.</span> <span class="toc-text">执行执JavaScript</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF"><span class="toc-number">6.</span> <span class="toc-text">获取节点信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7"><span class="toc-number">6.1.</span> <span class="toc-text">获取属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E6%9C%AC%E5%80%BC"><span class="toc-number">6.2.</span> <span class="toc-text">获取文本值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%8E%B7ID%E3%80%81%E4%BD%8D%E7%BD%AE%E3%80%81%E6%A0%87%E7%AD%BE%E5%90%8D%E3%80%81%E5%A4%A7%E5%B0%8F"><span class="toc-number">6.3.</span> <span class="toc-text">获取获ID、位置、标签名、大小</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2Frame"><span class="toc-number">7.</span> <span class="toc-text">切换Frame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E6%97%B6%E7%AD%89%E5%BE%85"><span class="toc-number">8.</span> <span class="toc-text">延时等待</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="toc-number">8.1.</span> <span class="toc-text">隐式等待</span></a></li></ol></li></ol>
                    </div>
                
                <hr />
                <p>在很多情况下，<code>Ajax</code>请求的接口通常会包含加密的参数，如<code>token</code>、<code>sign</code>等，如：<a target="_blank" rel="noopener" href="https://dynamic2.scrape.cuiqingcai.com/">https://dynamic2.scrape.cuiqingcai.com/</a>，它的<code>Ajax</code>接口是包含一个<code>token</code>参数的，如图所示。</p>
<p><img src="Screenshot_5.webp"></p>
<p>由于接口的请求加上了<code>token</code>参数，如果不深入分析并找到<code>token</code>的构造逻辑，是难以直接模拟这些<code>Ajax</code>请求的。</p>
<p><code>Selenium</code>是一个自动化测试工具，利用它可以驱动浏览器执行特定的动作，如点击、下拉等操作，同时还可以获取浏览器当前呈现的页面源代码，做到可见即可爬。对于一些使用<code>JavaScript</code>动态渲染的页面来说，此种抓取方式非常有效。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>确保已经正确安装好了<code>Chrome</code>浏览器并配置好了<code>ChromeDriver</code>。另外，还需要正确安装好<code>Python</code>的<code>Selenium</code>库。</p>
<h3 id="Selenium安装"><a href="#Selenium安装" class="headerlink" title="Selenium安装"></a>Selenium安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install selenium</span><br></pre></td></tr></table></figure>

<h3 id="chrome-driver安装"><a href="#chrome-driver安装" class="headerlink" title="chrome driver安装"></a>chrome driver安装</h3><p>查看安装的浏览器版本，在<code>chrome</code>搜索栏输入<code>chrome://version/</code>，会显示带当前浏览器的版本信息。</p>
<p><img src="Screenshot_1.webp"></p>
<p>在<a target="_blank" rel="noopener" href="https://npm.taobao.org/mirrors/chromedriver/">https://npm.taobao.org/mirrors/chromedriver/</a>下载对应版本的<code>chrome driver</code>，一定要对应，否则不能使用。</p>
<p><img src="Screenshot_2.webp"></p>
<p>下载到本地后，将<code>chromedriver.exe</code>分别拷贝到<code>chrome.exe</code>和<code>python</code>安装路径下。</p>
<p><img src="Screenshot_3.webp"></p>
<p><img src="Screenshot_4.webp"></p>
<p>以上，安装就完成了！</p>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>首先来看一下<code>Selenium</code>有一些怎样的功能。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    browser.get(<span class="string">&#x27;https://www.baidu.com&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span> = browser.find_element_by_id(<span class="string">&#x27;kw&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span>.send_keys(<span class="string">&#x27;Python&#x27;</span>)</span><br><span class="line">    <span class="built_in">input</span>.send_keys(Keys.ENTER)</span><br><span class="line">    wait = WebDriverWait(browser, <span class="number">10</span>)</span><br><span class="line">    wait.until(EC.presence_of_element_located((By.ID, <span class="string">&#x27;content_left&#x27;</span>)))</span><br><span class="line">    <span class="built_in">print</span>(browser.current_url)</span><br><span class="line">    <span class="built_in">print</span>(browser.get_cookies())</span><br><span class="line">    <span class="built_in">print</span>(browser.page_source)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    browser.close()</span><br></pre></td></tr></table></figure>

<p>运行代码后会自动弹出一个<code>Chrome</code>浏览器，浏览器会跳转到百度，然后在搜索框中输入<code>Python</code>，接着跳转到搜索结果页，如图所示。</p>
<p><img src="Screenshot_6.webp"></p>
<p>此时在控制台的输出结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">href=&quot;http://www.baidu.com/link?url=CYEq_OJxbiLcx5LothJSzfcQI9xeTzMYkPSFg2HYyceDRTQi8o6Fk8oLyRG5BTI8remsEFjvd4qN8vGLA-EBg_&quot; target=&quot;_blank&quot;&gt;你都用 &lt;em&gt;Python&lt;/em&gt; 来做什么? - 知乎&lt;/a&gt;&lt;/h3&gt;&lt;div class=&quot;c-row c-gap-top-small&quot;&gt;&lt;div class=&quot;general_image_pic c-span3&quot; style=&quot;position:relative;top:2px;&quot;&gt;&lt;a class=&quot;c-img c-img3 c-img-radius-large&quot; style=&quot;height:85px&quot; href=&quot;http://www.baidu.com/link?url=CYEq_OJxbiLcx5LothJSzfcQI9xeTzMYkPSFg2HYyceDRTQi8o6Fk8oLyRG5BTI8remsEFjvd4qN8vGLA-EBg_&quot; target=&quot;_blank&quot;&gt;&lt;img class=&quot;c-img c-img3 c-img-radius-large&quot; src=&quot;https://dss1.bdstatic.com/6OF1bjeh1BF3odCf/it/u=958012630,1445793633&amp;amp;fm=218&amp;amp;app=92&amp;amp;f=JPEG?w=121&amp;amp;h=75&amp;amp;s=44A638725CB7469C82F4FFF40200D025&quot; style=&quot;height:85px;&quot;&gt;&lt;span class=&quot;c-img-border c-img-radius-large&quot;&gt;&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;c-span9 c-span-last&quot;&gt;&lt;div class=&quot;c-abstract&quot;&gt;&lt;span class=&quot; newTimeFactor_before_abs c-color-gray2 m&quot;&gt;2019年10月17日&amp;nbsp;&lt;/span&gt;所有项目的代码和数据在Github:interesting-&lt;em&gt;python&lt;/em&gt; 如果你也想用&lt;em&gt;Python&lt;/em&gt;获取数据,进行有趣的 </span><br><span class="line">数据分析,Alfred数据室应众多读者要求出品的《实战玩转&lt;em&gt;python&lt;/em&gt;爬虫》课程将会是你的好帮手...&lt;/div&gt;&lt;style&gt;.user-avatar &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-direction: row;</span><br><span class="line">        align-items: center;</span><br><span class="line">        justify-content: flex-start;</span><br><span class="line">&#125;&lt;/style&gt;&lt;div class=&quot;f13 c-gap-top-xsmall se_st_footer user-avatar&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://www.baidu.com/link?url=CYEq_OJxbiLcx5LothJSzfcQI9xeTzMYkPSFg2HYyceDRTQi8o6Fk8oLyRG5BTI8remsEFjvd4qN8vGLA-EBg_&quot; class=&quot;c-showurl c-color-gray&quot; style=&quot;text-decoration:none;position:relative;&quot;&gt;&lt;div class=&quot;c-img c-img-circle c-gap-right-xsmall&quot; style=&quot;display: inline-block;width: 16px;height: 16px;position: relative;top: 3px;vertical-align:top;&quot;&gt;&lt;span class=&quot;c-img-border c-img-source-border c-img-radius-large&quot;&gt;&lt;/span&gt;&lt;img src=&quot;https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=493147230,3096476255&amp;amp;fm=195&amp;amp;app=88&amp;amp;f=JPEG?w=200&amp;amp;h=200&quot;&gt;&lt;/div&gt;知乎&lt;/a&gt;&lt;div class=&quot;c-tools c-gap-left&quot; id=&quot;tools_9637258987948217910_8&quot; data-tools=&quot;&#123;&amp;quot;title&amp;quot;:&amp;quot;你都用 Python 来做什么? - 知乎&amp;quot;,&amp;quot;url&amp;quot;:&amp;quot;http://www.baidu.com/link?url=CYEq_OJxbiLcx5LothJSzfcQI9xeTzMYkPSFg2HYyceDRTQi8o6Fk8oLyRG5BTI8remsEFjvd4qN8vGLA-EBg_&amp;quot;&#125;&quot;&gt;&lt;i class=&quot;c-icon f13&quot;&gt;&lt;/i&gt;&lt;/div&gt;&lt;span class=&quot;c-icons-outer&quot;&gt;&lt;span class=&quot;c-icons-inner&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;style&gt;.snapshoot, .snapshoot:visited &#123;</span><br><span class="line">        color: #9195A3!important;</span><br><span class="line">    &#125;</span><br><span class="line">    .snapshoot:active, .snapshoot:hover &#123;</span><br><span class="line">        color: #626675!important;</span><br><span class="line">    &#125;&lt;/style&gt;&lt;a data-click=&quot;&#123;&#x27;rsv_snapshot&#x27;:&#x27;1&#x27;&#125;&quot; href=&quot;http://cache.baiducontent.com/c?m=JgFgeas2iHrh6pppvD-MHkvHPj9DsOz-wd718JIlv_IJy7d0KdQ2HvVIYznaRWwGrKHLEtVbqjR4uoZg6X_h4g62yFf5FgBVDUBkRfcWrOG&amp;amp;p=8b2a9715d9c647f904aec5344f57&amp;amp;newp=8b2a9729c5df1bb508e291784f4a92695d0fc20e3ad0d001298ffe0cc4241a1a1a3aecbf2c261600d7c279650aab4a5feff336743d0034f1f689df08d2ecce7e439b3b6e6a&amp;amp;s=45c48cce2e2d7fbd&amp;amp;user=baidu&amp;amp;fm=sc&amp;amp;query=Python&amp;amp;qid=dc4c1a0300139b42&amp;amp;p1=8&quot; target=&quot;_blank&quot; class=&quot;m c-gap-left c-color-gray kuaizhao snapshoot&quot;&gt;百度快照&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>源代码过长，在此省略。可以看到，当前得到的<code>URL</code>、<code>Cookies</code>和源代码都是浏览器中的真实内容。所以说，如果用<code>Selenium</code>来驱动浏览器加载网页的话，就可以直接拿到<code>JavaScript</code>渲染的结果了，不用担心使用的是什么加密系统。</p>
<p>了解一下<code>Selenium</code>的用法。</p>
<h2 id="声明浏览器对象"><a href="#声明浏览器对象" class="headerlink" title="声明浏览器对象"></a>声明浏览器对象</h2><p><code>Selenium</code>支持非常多的浏览器，如<code>Chrome</code>、<code>Firefox</code>、<code>Edge</code>等，还有<code>Android</code>、<code>BlackBerry</code>等手机端的浏览器。</p>
<p>可以用如下方式进行初始化：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser = webdriver.Firefox()</span><br><span class="line">browser = webdriver.Edge()</span><br><span class="line">browser = webdriver.Safari()</span><br></pre></td></tr></table></figure>

<p>这样就完成了浏览器对象的初始化并将其赋值为<code>browser</code>对象。接下来，要做的就是调用<code>browser</code>对象，让其执行各个动作以模拟浏览器操作。</p>
<h2 id="访问页面"><a href="#访问页面" class="headerlink" title="访问页面"></a>访问页面</h2><p>可以用<code>get</code>方法请求页面，只需要把参数传入连接<code>URL</code>即可。比如，这里用<code>get</code>方法访问淘宝，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.taobao.com&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(browser.page_source)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<p>运行后会弹出<code>Chrome</code>浏览器并且自动访问淘宝，然后控制台会输出淘宝页面的源代码，随后浏览器关闭。</p>
<h2 id="查找节点"><a href="#查找节点" class="headerlink" title="查找节点"></a>查找节点</h2><p><code>Selenium</code>可以驱动浏览器完成各种操作，比如填充表单、模拟点击等。举个例子，当想要完成向某个输入框输入文字的操作时，首先需要知道这个输入框在哪，而 <code>Selenium</code>提供了一系列查找节点的方法，可以用这些方法来获取想要的节点，以便执行下一步动作或者提取信息。</p>
<h3 id="单个节点"><a href="#单个节点" class="headerlink" title="单个节点"></a>单个节点</h3><p>想要从淘宝页面中提取搜索框这个节点，首先要观察它的源代码。</p>
<p>可以发现，它的<code>id</code>是<code>q</code>，<code>name</code>也是<code>q</code>，此外还有许多其他属性。此时就可以用多种方式获取它了。比如，<code>find_element_by_name</code>代表根据<code>name</code>值获取，<code>find_element_by_id</code>则是根据<code>id</code>获取，另外，还有根据<code>XPath</code>、<code>CSS</code>选择器等获取的方式。</p>
<p>这里使用<code>3</code>种方式获取输入框，分别是根据<code>id</code>、<code>CSS</code>选择器和<code>XPath</code>获取，它们返回的结果完全一致。运行结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;fbca625cd8bb4eb98ae76bb68a23bd4f&quot;</span>,element=<span class="string">&quot;de630823-02d3-409a-ba19-4e892a0fad15&quot;</span>)&gt; </span><br><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;fbca625cd8bb4eb98ae76bb68a23bd4f&quot;</span>, element=<span class="string">&quot;de630823-02d3-409a-ba19-4e892a0fad15&quot;</span>)&gt; </span><br><span class="line">[&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;fbca625cd8bb4eb98ae76bb68a23bd4f&quot;</span>, element=<span class="string">&quot;de630823-02d3-409a-ba19-4e892a0fad15&quot;</span>)&gt;]</span><br></pre></td></tr></table></figure>

<p>这3个节点的类型是一致的，都是<code>WebElement</code>。</p>
<p>这里列出所有获取单个节点的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_element_by_id </span><br><span class="line">find_element_by_name </span><br><span class="line">find_element_by_xpath </span><br><span class="line">find_element_by_link_text </span><br><span class="line">find_element_by_partial_link_text </span><br><span class="line">find_element_by_tag_name </span><br><span class="line">find_element_by_class_name </span><br><span class="line">find_element_by_css_selector</span><br></pre></td></tr></table></figure>

<h3 id="多个节点"><a href="#多个节点" class="headerlink" title="多个节点"></a>多个节点</h3><p>多如果在网页中只查找一个目标，那么完全可以用<code>find_element</code>方法。但如果有多个节点需要查找，再用<code>find_element</code>方法，就只能得到第1个节点了。如果要查找所有满足条件的节点，需要用<code>find_elements</code>这样的 方法。注意，在这个方法的名称中， 注<code>element</code>多了一个多<code>s</code>，注意区分。</p>
<p>举个例子，假如要查找淘宝左侧导航条的所有条目，就可以这样来实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.taobao.com&#x27;</span>)</span><br><span class="line">lis = browser.find_elements_by_css_selector(<span class="string">&#x27;.service-bd li&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(lis)</span><br><span class="line">browser.close()</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;01e78303-6103-4f1a-96dc-0386a755a9f4&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;7a4e764e-9a05-4dad-9188-636512591835&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;16219266-ff57-4f42-95ab-4b8dbb4b811a&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;4f23598b-3ca6-4b20-9192-3e06e98984df&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;d837e630-e546-4f8b-babd-e3fdc539d2a6&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;1da195c9-d959-4d47-b729-21d8eac2756f&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;175c2217-dbe6-4d27-997f-58fbe46cbf1a&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;4747359f-d93c-4a7a-976e-501087d96e5f&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;2537bb34-3a26-4ccd-8f53-4ebbef5c70b2&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;04210bc7-ebba-44ef-8757-d88dfd0d023f&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;7bd1b6e4-31e5-4120-8017-afc59ca56f48&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;930a7b6c-26ff-468c-896e-6204b0555747&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;81305b6e-0893-46d2-b7a7-89a85c00132c&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;763237aa-5925-426d-9a76-90b3567870eb&quot;</span>)&gt;, &lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;f9550f7bf1204e4d481803cf7a69c736&quot;</span>, element=<span class="string">&quot;60ca3595-3f74-4f1d-9224-7beb9e381a4b&quot;</span>)&gt;]</span><br></pre></td></tr></table></figure>

<p>得到的内容变成了列表类型，列表中的每个节点都是<code>WebElement</code>类型。</p>
<p>也就是说，如果用<code>find_element</code>方法，只能获取匹配的第一个节点，结果是<code>WebElement</code>类型。如果用<code>find_elements</code>方法，则结果是列表类型，列表中的每个节点是<code>WebElement</code>类型。</p>
<p>这里列出所有获取多个节点的方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find_elements_by_id</span><br><span class="line">find_elements_by_name</span><br><span class="line">find_elements_by_xpath</span><br><span class="line">find_elements_by_link_text</span><br><span class="line">find_elements_by_partial_link_text</span><br><span class="line">find_elements_by_tag_name</span><br><span class="line">find_elements_by_class_name</span><br><span class="line">find_elements_by_css_selector</span><br></pre></td></tr></table></figure>

<p>当然，也可以直接用<code>find_elements</code>方法来选择，这时可以这样写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lis = browser.find_elements(By.CSS_SELECTOR, <span class="string">&#x27;.service-bd li&#x27;</span>) </span><br></pre></td></tr></table></figure>

<p>结果是完全一致的。</p>
<h3 id="节点交互"><a href="#节点交互" class="headerlink" title="节点交互"></a>节点交互</h3><p><code>Selenium</code>可以驱动浏览器来执行一些操作，或者说可以让浏览器模拟执行一些动作。比较常见的用法有：输入文字时用<code>send_keys</code>方法，清空文字时用<code>clear</code>方法，点击按钮时用<code>click</code>方法。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.taobao.com&#x27;</span>)</span><br><span class="line"><span class="built_in">input</span> = browser.find_element_by_id(<span class="string">&#x27;q&#x27;</span>)</span><br><span class="line"><span class="built_in">input</span>.send_keys(<span class="string">&#x27;apple&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">input</span>.clear()</span><br><span class="line"><span class="built_in">input</span>.send_keys(<span class="string">&#x27;小米&#x27;</span>)</span><br><span class="line">button = browser.find_element_by_class_name(<span class="string">&#x27;btn-search&#x27;</span>)</span><br><span class="line">button.click()</span><br></pre></td></tr></table></figure>

<p>这里首先驱动浏览器打开淘宝，用<code>find_element_by_id</code>方法获取输入框，然后用<code>send_keys</code>方法输入<code>iPhone</code>文字，等待一秒后用<code>clear</code>方法清空输入框，接着再次调用<code>send_keys</code>方法输入<code>iPad</code>文字，之后再用<code>find_element_by_class_name</code>方法获取搜索按钮，最后调用<code>click</code>方法完成搜索动作。</p>
<h3 id="动作链"><a href="#动作链" class="headerlink" title="动作链"></a>动作链</h3><p>在上面的实例中，一些交互动作都是针对某个节点执行的。比如，对于输入框，调用它的输入文字和清空文字方法；对于按钮，调用它的点击方法。其实，还有另外一些操作，它们没有特定的执行对象，比如鼠标拖拽、键盘按键等，这些动作用另一种方式来执行，那就是动作链。</p>
<p>比如，现在要实现一个节点的拖拽操作，将某个节点从一处拖拽到另外一处，可以这样实现：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#x27;</span></span><br><span class="line"></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to.frame(<span class="string">&#x27;iframeResult&#x27;</span>)</span><br><span class="line">source = browser.find_element_by_css_selector(<span class="string">&quot;#draggable&quot;</span>)</span><br><span class="line">target = browser.find_element_by_css_selector(<span class="string">&quot;#droppable&quot;</span>)</span><br><span class="line">actions = ActionChains(browser)</span><br><span class="line">actions.drag_and_drop(source, target)</span><br><span class="line">actions.perform()</span><br></pre></td></tr></table></figure>

<p>打开网页中的一个拖拽实例，依次选中要拖拽的节点和拖拽到的目标节点，接着声明<code>ActionChains</code>对象并将其赋值为<code>actions</code>变量，然后通过调用<code>actions</code>变量的<code>drag_and_drop</code>方法，再调用<code>perform</code>方法执行动作，此时就完成了拖拽操作，如图所示：</p>
<p><img src="Screenshot_7.webp"></p>
<p>拖拽前页面：</p>
<p><img src="Screenshot_8.webp"></p>
<h3 id="执行执JavaScript"><a href="#执行执JavaScript" class="headerlink" title="执行执JavaScript"></a>执行执<code>JavaScript</code></h3><p><code>SeleniumAPI</code>并没有提供实现某些操作的方法，比如，下拉进度条。但它可以直接模拟运行<code>JavaScript</code>，此时使用<code>execute_script</code>方法即可实现，代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.get(<span class="string">&#x27;https://www.zhihu.com/explore&#x27;</span>)</span><br><span class="line">browser.execute_script(<span class="string">&#x27;window.scrollTo(0, document.body.scrollHeight)&#x27;</span>)</span><br><span class="line">browser.execute_script(<span class="string">&#x27;alert(&quot; To Bottom)&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>这里利用<code>execute_script</code>方法将进度条下拉到最底部，然后弹出<code>alert</code>提示框。</p>
<p>有了这个方法，基本上<code>API</code>没有提供的所有功能都可以用执行<code>JavaScript</code>的方式来实现了。</p>
<h2 id="获取节点信息"><a href="#获取节点信息" class="headerlink" title="获取节点信息"></a>获取节点信息</h2><p><code>Selenium</code>已经提供了选择节点的方法，并且返回的是<code>WebElement</code>类型，那么它也有相关的方法和属性来直接提取节点信息，如属性、文本等。这样的话，就可以不用通过解析源代码来提取信息了，非常方便。</p>
<h3 id="获取属性"><a href="#获取属性" class="headerlink" title="获取属性"></a>获取属性</h3><p>可以使用<code>get_attribute</code>方法来获取节点的属性，但是前提是得先选中这个节点，示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;https://www.baidu.com/&#x27;</span></span><br><span class="line">browser.get(url)</span><br><span class="line">logo = browser.find_element_by_class_name(<span class="string">&#x27;index-logo-src&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(logo)</span><br><span class="line"><span class="built_in">print</span>(logo.get_attribute(<span class="string">&#x27;src&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>运行之后，程序便会驱动浏览器打开该页面，然后获取<code>class</code>为<code>logo-image</code>的节点，最后打印出它的<code>src</code>属性。</p>
<p>返回结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;c90d6158ff9e3e6ba88d5f9b9358a358&quot;</span>, element=<span class="string">&quot;c99170cd-b0c1-44b6-a0a0-f4ccf1105e91&quot;</span>)&gt;</span><br><span class="line">https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png</span><br></pre></td></tr></table></figure>

<p>通过<code>get_attribute</code>方法，只需要传入想要获取的属性名，就可以得到它的值了。</p>
<h3 id="获取文本值"><a href="#获取文本值" class="headerlink" title="获取文本值"></a>获取文本值</h3><p>每个<code>WebElement</code>节点都有<code>text</code>属性，直接调用这个属性就可以得到节点内部的文本信息，这相当于<code>pyquery</code>的<code>text</code>方法，示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;https://holychan.ltd/archives/&#x27;</span></span><br><span class="line">browser.get(url)</span><br><span class="line">title = browser.find_element_by_class_name(<span class="string">&#x27;title-h2&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(title)</span><br><span class="line"><span class="built_in">print</span>(title.text)</span><br></pre></td></tr></table></figure>

<p>结果如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;79f97c0aa935723e276438a5fff2610c&quot;</span>, element=<span class="string">&quot;b86ec344-cb00-4538-b9e9-8959a076bc75&quot;</span>)&gt;</span><br><span class="line">文章归档</span><br></pre></td></tr></table></figure>

<h3 id="获取获ID、位置、标签名、大小"><a href="#获取获ID、位置、标签名、大小" class="headerlink" title="获取获ID、位置、标签名、大小"></a>获取获ID、位置、标签名、大小</h3><p><code>WebElement</code>节点还有一些其他属性，比如<code>id</code>属性可以获取节点<code>id</code>，<code>location</code>属性可以获取该节点在页面中的相对位置，<code>tag_name</code>属性可以获取标签名称，<code>size</code>属性可以获取节点的大小，也就是宽高，这些 属性有时候还是很有用的。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome() </span><br><span class="line">url = <span class="string">&#x27;https://dynamic2.scrape.cuiqingcai.com/&#x27;</span> </span><br><span class="line">browser.get(url) </span><br><span class="line"><span class="built_in">input</span> = browser.find_element_by_class_name(<span class="string">&#x27;logo-title&#x27;</span>) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>.<span class="built_in">id</span>) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>.location) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>.tag_name) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>.size) </span><br></pre></td></tr></table></figure>

<p>这里首先获得<code>class</code>为<code>logo-title</code>这个节点，然后调用其<code>id</code>、<code>location</code>、<code>tag_name</code>、<code>size</code>属性来获取对应的属性值。</p>
<h2 id="切换Frame"><a href="#切换Frame" class="headerlink" title="切换Frame"></a>切换Frame</h2><p>网页中有一种节点叫作<code>iframe</code>，也就是子<code>Frame</code>，相当于页面的子页面，它的结构和外部网页的结构完全一致。<code>Selenium</code>打开页面后，默认是在父级<code>Frame</code>里面操作，而此时如果页面中还有子<code>Frame</code>，<code>Selenium</code>是不能获取到子<code>Frame</code>里面的节点的。这时就需要使用<code>switch_to.frame</code>方法来切换<code>Frame</code>。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> NoSuchElementException</span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">url = <span class="string">&#x27;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable&#x27;</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.switch_to(<span class="string">&#x27;iframeResult&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    logo = browser.find_element_by_class_name(<span class="string">&#x27;logo&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> NoSuchElementException:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;No logo found&#x27;</span>)</span><br><span class="line">browser.switch_to.parent_frame()</span><br><span class="line">logo = browser.find_element_by_class_name(<span class="string">&#x27;logo&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(logo)</span><br><span class="line"><span class="built_in">print</span>(logo.text)</span><br></pre></td></tr></table></figure>

<p>控制台输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">No logo found</span><br><span class="line">&lt;selenium.webdriver.remote.webelement.WebElement (session=<span class="string">&quot;ce74c2d83e0aca64c9ef8c4540b2fe16&quot;</span>, element=<span class="string">&quot;1d2c3c25-bd01-4b9a-b11b-16b8534bf6c2&quot;</span>)&gt;</span><br><span class="line">RUNOOB.COM</span><br></pre></td></tr></table></figure>

<p>首先通过<code>switch_to.frame</code>方法切换到子<code>Frame</code>里面，然后尝试获取子<code>Frame</code>里的<code>logo</code>节点（这是不能找到的），如果找不到的话，就会抛出<code>NoSuchElementException</code>异常，异常被捕捉之后，就会输出<code>No logo found</code>。接下来，我们需要重新切换回父级<code>Frame</code>，然后再次重新获取节点，发现此时可以成功获取了。</p>
<p>所以，当页面中包含子<code>Frame</code>时，如果想获取子<code>Frame</code>中的节点，需要先调用<code>switch_to.frame</code>方法切换到对应的<code>Frame</code>，然后再进行操作。</p>
<h2 id="延时等待"><a href="#延时等待" class="headerlink" title="延时等待"></a>延时等待</h2><p>在<code>Selenium</code>中，<code>get</code>方法会在网页框架加载结束后结束执行，此时如果获取<code>page_source</code>，可能并不是浏览器完全加载完成的页面，如果某些页面有额外的<code>Ajax</code>请求，在网页源代码中也不一定能成功获取 \到。所以，这里需要延时等待一定时间，确保节点已经加载出来。</p>
<p>这里等待的方式有两种：一种是隐式等待，一种是显式等待。</p>
<h3 id="隐式等待"><a href="#隐式等待" class="headerlink" title="隐式等待"></a>隐式等待</h3><p>当使用隐式等待执行测试的时候，如果<code>Selenium</code>没有在<code>DOM</code>中找到节点，将继续等待，超出设定时间后，则抛出找不到节点的异常。换句话说，隐式等待可以在我们查找节点而节点并没有立即出现的时候， 等待一段时间再查找<code>DOM</code>，默认的时间是<code>0</code>。示例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome()</span><br><span class="line">browser.implicitly_wait(<span class="number">10</span>)</span><br><span class="line">browser.get(<span class="string">&#x27;https://dynamic2. scrape.cuiqingcai.com/&#x27;</span>) </span><br><span class="line"><span class="built_in">input</span> = browser.find_element_by_class_name(<span class="string">&#x27;logo-image&#x27;</span>) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">input</span>)</span><br></pre></td></tr></table></figure>


            </div>
            
                <div class="kratos-copyright text-center clearfix">
                    <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
                </div>
            
            <footer class="kratos-entry-footer clearfix">
                
                    <div class="post-like-donate text-center clearfix" id="post-like-donate">
                    
                    
                        <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                        <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://example.com/2021/05/25/Selenium%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://example.com/2021/05/25/Selenium%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/";
            const title         = "「Selenium的基本使用」";
            const excerpt       = `在很多情况下，Ajax请求的接口通常会包含加密的参数，如token、sign等，如：https://dynamic2.scrape.cuiqingcai.com/，它的Ajax接口是包含一个token参数的，如图所示。

由于接口的请...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                    
                    </div>
                
                <div class="footer-tag clearfix">
                    <div class="pull-left">
                    <i class="fa fa-tags"></i>
                        <a class="tag-none-link" href="/tags/selenium/" rel="tag">selenium</a>
                    </div>
                    <div class="pull-date">
                    <span>最后编辑：2021-05-29</span>
                    </div>
                </div>
            </footer>
        </div>
        
            <nav class="navigation post-navigation clearfix" role="navigation">
                
                <div class="nav-previous clearfix">
                    <a title=" 基于docker部署code-server" href="/2021/05/25/基于docker部署code-server/">&lt; 上一篇</a>
                </div>
                
                
                <div class="nav-next clearfix">
                    <a title=" go语言的下载和安装" href="/2021/05/26/go语言的下载和安装/">下一篇 &gt;</a>
                </div>
                
            </nav>
        
        
    </article>
</section>

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/my.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix">
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar"></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Selenium%E5%AE%89%E8%A3%85"><span class="toc-text">Selenium安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chrome-driver%E5%AE%89%E8%A3%85"><span class="toc-text">chrome driver安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1"><span class="toc-text">声明浏览器对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2"><span class="toc-text">访问页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E8%8A%82%E7%82%B9"><span class="toc-text">查找节点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="toc-text">单个节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="toc-text">多个节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E4%BA%A4%E4%BA%92"><span class="toc-text">节点交互</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E4%BD%9C%E9%93%BE"><span class="toc-text">动作链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%89%A7JavaScript"><span class="toc-text">执行执JavaScript</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF"><span class="toc-text">获取节点信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7"><span class="toc-text">获取属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%96%87%E6%9C%AC%E5%80%BC"><span class="toc-text">获取文本值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%8E%B7ID%E3%80%81%E4%BD%8D%E7%BD%AE%E3%80%81%E6%A0%87%E7%AD%BE%E5%90%8D%E3%80%81%E5%A4%A7%E5%B0%8F"><span class="toc-text">获取获ID、位置、标签名、大小</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2Frame"><span class="toc-text">切换Frame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%B6%E6%97%B6%E7%AD%89%E5%BE%85"><span class="toc-text">延时等待</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E7%AD%89%E5%BE%85"><span class="toc-text">隐式等待</span></a></li></ol></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">博客教程</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BA%84%E5%AD%90/">庄子</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><span class="category-list-count">14</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/Git/" style="font-size: 0.6em;">Git</a> <a href="/tags/Hexo/" style="font-size: 0.73em;">Hexo</a> <a href="/tags/Nginx/" style="font-size: 0.6em;">Nginx</a> <a href="/tags/ajax/" style="font-size: 0.67em;">ajax</a> <a href="/tags/css/" style="font-size: 0.6em;">css</a> <a href="/tags/docker/" style="font-size: 0.73em;">docker</a> <a href="/tags/git/" style="font-size: 0.6em;">git</a> <a href="/tags/go/" style="font-size: 0.6em;">go</a> <a href="/tags/html/" style="font-size: 0.6em;">html</a> <a href="/tags/http/" style="font-size: 0.8em;">http</a> <a href="/tags/https/" style="font-size: 0.6em;">https</a> <a href="/tags/javascript/" style="font-size: 0.67em;">javascript</a> <a href="/tags/linux/" style="font-size: 0.67em;">linux</a> <a href="/tags/mongodb/" style="font-size: 0.6em;">mongodb</a> <a href="/tags/multiprocessing/" style="font-size: 0.6em;">multiprocessing</a> <a href="/tags/nextCloud/" style="font-size: 0.6em;">nextCloud</a> <a href="/tags/nginx/" style="font-size: 0.6em;">nginx</a> <a href="/tags/pymongodb/" style="font-size: 0.6em;">pymongodb</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2021/05/29/scrapy%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"><i class="fa  fa-book"></i> scrapy的基本使用</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/29/scrapy%E6%A1%86%E6%9E%B6%E4%BB%8B%E7%BB%8D/"><i class="fa  fa-book"></i> scrapy框架介绍</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/29/%E5%86%85%E7%AF%87%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E9%BD%90%E7%89%A9%E8%AE%BA/"><i class="fa  fa-book"></i> 内篇（二）——齐物论</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/29/%E5%86%85%E7%AF%87%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E9%80%8D%E9%81%A5%E6%B8%B8/"><i class="fa  fa-book"></i> 内篇（一）——逍遥游</a>
            
          
        
          
          
            <a class="list-group-item" href="/2021/05/28/python%E7%9A%84%E5%86%85%E7%BD%AE%E7%B1%BB%E5%9E%8B/"><i class="fa  fa-book"></i> python的内置类型</a>
            
          
        
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        <li><a href="mailto:espholychan@outlook.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        
                        
                        
                        
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2021 Holy的个人站点 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by Holy Chan.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            
                        </div>
                        <div>
                            <li><a href="https://beian.miit.gov.cn" rel="external nofollow" target="_blank">鄂ICP备2021008617号-1</a></li>
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>
<script>const notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));</script>

    <div>
        <canvas id="snow"></canvas>
        <script async type="text/javascript" src="/js/snow.min.js"></script>
    </div>

<script async src="/js/candy.min.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="3204190542"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>